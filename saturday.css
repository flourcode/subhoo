/* ========================================= */
/* CSS Variables - Light Mode (Neutral + Purple Accent) */
/* ========================================= */
:root {
    /* --- Core Hex Palette --- */
    /* Neutral Grays */
    --hex-gray-white: #FFFFF3;
    --hex-gray-50: #F9F9F9;     /* Background */
    --hex-gray-100: #F0F0F0;    /* Surface */
    --hex-gray-200: #E8E8E8;    /* Container */
    --hex-gray-300: #DDDDDD;    /* Variant / Border */
    --hex-gray-400: #CCCCCC;    /* Outline / Tertiary Chart */
    --hex-gray-500: #B3B3B3;    /* Tertiary Text / Secondary Action BG */
    --hex-gray-700: #555555;    /* Secondary Text */
    --hex-gray-900: #222222;    /* Primary Text */
    /* Muted Purple Accent (from Monocle theme) */
    --hex-accent-purple-400: #9A949B; /* Primary / Chart */
    --hex-accent-purple-500: #7A747B; /* Secondary / Chart */
    --hex-accent-purple-300: #B6B1B7; /* Tertiary Chart / Light Neutral */
    /* Status Colors (Standard - high visibility recommended) */
    --status-red: #D81B60;
    --status-green: #388E3C;
    --status-blue: #1E88E5;
    --status-yellow: #FBC02D; /* Warning */
    /* --- Semantic Color Mapping --- */
    --color-background: var(--hex-gray-50);
    --color-surface: var(--hex-gray-white);
    --color-surface-container: var(--hex-gray-100);
    --color-surface-variant: var(--hex-gray-200);
    --color-text-primary: var(--hex-gray-900);
    --color-text-secondary: var(--hex-gray-700);
    --color-text-tertiary: var(--hex-gray-500);
    --color-primary: var(--hex-accent-purple-400); /* Muted Purple accent */
    --color-on-primary: var(--hex-gray-white);    /* White text on muted purple */
    --color-secondary: var(--hex-gray-500);        /* Use mid-gray for secondary action */
    --color-on-secondary: var(--hex-gray-900);     /* Dark text on light gray */
    --color-border: var(--hex-gray-300);
    --color-outline: var(--hex-gray-400);
    --color-focus-ring: rgba(154, 148, 155, 0.5);   /* Based on purple primary */
    --chart-color-primary: var(--hex-accent-purple-400);
    --chart-color-secondary: var(--hex-accent-purple-500); /* Darker Muted Purple */
    --chart-color-tertiary: var(--hex-accent-purple-300); /* Lighter Muted Purple/Gray */
    --color-error: var(--status-red);
    --color-success: var(--status-green);
    --color-warning: var(--status-yellow);
    --color-info: var(--status-blue);
    /* --- Layout Values --- */
    --border-radius-sm: 6px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.12);
    --transition-standard: all 0.2s ease;
    --bento-gap: 20px;
    /* --- RGB Values for opacity --- */
    --color-surface-rgb: 255, 255, 255;
    --color-surface-container-rgb: 240, 240, 240;
    --color-primary-rgb: 154, 148, 155;
    --color-text-primary-rgb: 34, 34, 34;
    --color-text-secondary-rgb: 85, 85, 85;
    --color-error-rgb: 216, 27, 96;
    --color-success-rgb: 56, 142, 60;
    --color-info-rgb: 30, 136, 229;
}
/* ========================================= */
/* CSS Variables - Dark Mode (Neutral + Purple Accent) */
/* ========================================= */
[data-theme="dark"] {
    /* --- Core Hex Palette References --- */
    /* Light Grays for Text */
    --hex-gray-white-dark: #F5F5F5; /* Slightly off-white */
    --hex-gray-100-dark: #DCDCDC;
    --hex-gray-200-dark: #C8C8C8;
    /* Dark Grays for Surfaces */
    --hex-gray-600-dark: #5A5A5A; /* Mid-dark gray for outline/secondary action */
    --hex-gray-700-dark: #444444; /* Container/Border */
    --hex-gray-800-dark: #2B2B2B; /* Surface */
    --hex-gray-900-dark: #1E1E1E; /* Background */
    /* Brighter muted purple accent (from Monocle theme dark) */
    --hex-accent-purple-300-dark: #A59FA8; /* Primary */
    --hex-accent-purple-400-dark: #908A91; /* Secondary */
    --hex-accent-purple-500-dark: #767077; /* Tertiary */
    /* Status Colors (Brighter for Dark Mode) */
    --status-red-dark: #f06292;
    --status-green-dark: #81c784;
    --status-blue-dark: #64b5f6;
    --status-yellow-dark: #ffd54f;
    /* --- Semantic Color Mapping --- */
    --color-background: var(--hex-gray-900-dark);
    --color-surface: var(--hex-gray-800-dark);
    --color-surface-container: var(--hex-gray-700-dark);
    --color-surface-variant: var(--hex-gray-600-dark);
    --color-text-primary: var(--hex-gray-white-dark);
    --color-text-secondary: var(--hex-gray-100-dark);
    --color-text-tertiary: var(--hex-gray-200-dark);
    --color-primary: var(--hex-accent-purple-300-dark); /* Brighter muted purple */
    --color-on-primary: var(--hex-gray-900-dark);      /* Dark text on light purple */
    --color-secondary: var(--hex-gray-600-dark);       /* Mid-dark gray */
    --color-on-secondary: var(--hex-gray-white-dark);  /* Light text on mid-dark gray */
    --color-border: var(--hex-gray-700-dark);
    --color-outline: var(--hex-gray-600-dark);
    --color-focus-ring: rgba(165, 159, 168, 0.6);      /* Based on dark primary */
    --chart-color-primary: var(--hex-accent-purple-300-dark);
    --chart-color-secondary: var(--hex-accent-purple-400-dark);
    --chart-color-tertiary: var(--hex-accent-purple-500-dark);
    --color-error: var(--status-red-dark);
    --color-success: var(--status-green-dark);
    --color-warning: var(--status-yellow-dark);
    --color-info: var(--status-blue-dark);
    /* --- Shadow Variables Adjusted for Dark --- */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.25);
    --shadow-lg: 0 4px 6px rgba(0, 0, 0, 0.3);
    /* --- RGB Values for Dark Mode --- */
    --color-surface-rgb: 43, 43, 43;
    --color-surface-container-rgb: 68, 68, 68;
    --color-primary-rgb: 165, 159, 168;
    --color-text-primary-rgb: 245, 245, 245;
    --color-text-secondary-rgb: 220, 220, 220;
    --color-error-rgb: 240, 98, 146;
    --color-success-rgb: 129, 199, 132;
    --color-info-rgb: 100, 181, 246;
}
/* ========================================= */
/* Base Styles & Reset                       */
/* ========================================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
html {
    height: 100%;
}
body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background-color: var(--color-background);
    color: var(--color-text-primary);
    line-height: 1.5;
    font-size: 14px; /* Base size */
    margin: 0; /* Ensure no default margin */
    padding: 0; /* Ensure no default padding */
    height: 100%;
    overflow: hidden; /* Prevent body scroll when layout manages scrolling */
    transition: background-color 0.3s ease, color 0.3s ease;
}
/* ========================================= */
/* Theme Transitions & Base Links            */
/* ========================================= */
/* Apply theme transitions to common elements */
.bento-box,
.date-container,
.side-panel,
th,
tr:hover td,
.input-select, .input-date, input[type="search"], input[type="text"] {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
/* Base hyperlink styling */
a {
    color: var(--color-primary);
    text-decoration: none;
    transition: color 0.2s ease;
}
a:hover {
    color: var(--color-secondary);
}
/* ========================================= */
/* App Container                             */
/* ========================================= */
.app-container {
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    background-color: var(--color-background);
    margin: 40px;
    min-height: calc(100vh - 80px);
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(0, 0, 0, 0.1);
}
[data-theme="dark"] .app-container {
    background-color: var(--color-background);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.05);
}
/* ========================================= */
/* Layout Styles                             */
/* ========================================= */
.dashboard-layout {
    display: flex;
    height: 100%;
    overflow: hidden; /* Prevent double scrollbars */
}
.side-panel {
    width: 250px; /* Fixed width for sidebar */
    height: 100%;
    background-color: var(--color-surface);
    border-right: 1px solid var(--color-border);
    padding: 20px;
    overflow-y: auto; /* Allow sidebar content to scroll if needed */
    flex-shrink: 0; /* Prevent sidebar from shrinking */
    display: flex; /* Use flex for footer positioning */
    flex-direction: column; /* Stack sidebar content vertically */
}
/* Style for Sidebar Info Text */
.side-panel > div[style*="font-size: 12px"] {
    font-size: 13px !important; /* Keeping this at 13px */
    width: 100%; /* Ensure full width */
}
/* Style for Sidebar Footer */
.side-panel > div[style*="font-size: 10px"] {
    margin-top: auto; /* Push footer to bottom */
    padding-top: 10px; /* Add padding above footer */
    border-top: 1px solid var(--color-border); /* Add border above footer */
    font-size: 12px !important; /* Increased from 10px */
    width: 100%; /* Ensure full width */
}
.main-content {
    flex: 1;
    height: 100%;
    overflow-y: auto;
    padding: 20px;
    background-color: var(--color-surface);
}
/* ========================================= */
/* Header Styles                             */
/* ========================================= */
.dashboard-header {
    margin-bottom: 24px;
}
.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.title-area h1 {
    font-size: 24px; /* Main dashboard title */
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 4px;
}
.title-area p {
    font-size: 14px; /* Subtitle */
    color: var(--color-text-secondary);
}
.header-controls {
    display: flex;
    align-items: center;
    gap: 16px;
}
.date-container {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 16px;
    background-color: var(--color-surface-container);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--color-border);
    font-size: 14px; /* Date/Time */
    color: var(--color-text-primary);
}
.date-separator {
    color: var(--color-text-secondary);
    opacity: 0.6;
}
#date-text,
#time-text {
    font-weight: 500;
}
/* ========================================= */
/* Bento Grid Layout                         */
/* ========================================= */
.bento-grid {
    display: grid;
    gap: var(--bento-gap);
    grid-template-columns: repeat(5, 1fr); /* Keep this as 5 columns */
    grid-template-areas:
        "sankey sankey sankey sankey arr"
        "sankey sankey sankey sankey map"
        "tavtcv tavtcv leaders leaders leaders"
        "expiring expiring expiring expiring expiring";
    grid-template-rows: minmax(225px, auto) minmax(225px, auto) auto auto;
}
#bento-sankey { grid-area: sankey; }
#bento-map { grid-area: arr; }
#bento-arr { grid-area: map; }
#bento-tavtcv { grid-area: tavtcv; }
#bento-leaders { grid-area: leaders; }
#bento-expiring { grid-area: expiring; }
/* Column Span Utility */
.col-span-2 { grid-column: span 2; }
.col-span-4 { grid-column: span 4; }
.col-span-5 { grid-column: span 5; }
/* ========================================= */
/* Card Styles                               */
/* ========================================= */
.bento-box {
    background-color: var(--color-surface);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
    padding: 20px;
    transition: var(--transition-standard);
    position: relative;
    overflow: hidden;
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
    height: 100%;
}
[data-theme="dark"] .bento-box {
    background-color: var(--color-surface-container);
    border-color: var(--color-outline);
}
.bento-box:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}
/* Card Header */
.card-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 12px;
    flex-shrink: 0;
}
.card-header h2 {
    font-size: 16px; /* Card Titles */
    font-weight: 600;
    color: var(--color-text-primary);
    flex-grow: 1;
    margin: 0;
}
.card-icon-circle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: var(--color-surface-container);
    color: var(--color-primary);
    flex-shrink: 0;
}
/* Card Content Area */
.card-content,
.chart-container,
.table-container,
.arr-display-grid,
.notes-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
    min-height: 0;
}
/* ========================================= */
/* Form Element Styles (Inputs, Selects)     */
/* ========================================= */
.input-select,
.input-date,
input[type="search"],
input[type="text"] {
    width: 100%;
    padding: 10px 14px;
    border: 1px solid var(--color-outline);
    border-radius: var(--border-radius-md);
    font-size: 14px; /* Form Inputs */
    color: var(--color-text-primary);
    background-color: var(--color-surface-container);
}
.input-select:focus,
.input-date:focus,
input[type="search"]:focus,
input[type="text"]:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.2);
}
.input-select option {
    background-color: var(--color-surface-container);
    color: var(--color-text-primary);
}
/* Placeholder styling */
::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.8;
}
/* Dark mode input enhancements */
[data-theme="dark"] input::placeholder {
    color: rgba(var(--color-text-secondary-rgb), 0.5);
}
[data-theme="dark"] .input-select,
[data-theme="dark"] .input-date,
[data-theme="dark"] input[type="search"],
[data-theme="dark"] input[type="text"] {
    background-color: rgba(var(--color-surface-rgb), 0.8);
}
/* ========================================= */
/* Button Styles                             */
/* ========================================= */
button, .button, .primary-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: var(--border-radius-md);
    font-size: 14px; /* Buttons */
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition-standard);
    border: 1px solid var(--color-border);
    text-align: center;
    vertical-align: middle;
    white-space: nowrap;
}
/* Standard Button */
button, .button {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    border-color: var(--color-outline);
}
button:hover:not(:disabled), .button:hover:not(:disabled) {
    background-color: var(--color-surface-container);
    border-color: var(--color-primary);
}
/* Primary Button */
.primary-button {
    background-color: var(--color-primary);
    color: var(--color-on-primary);
    border: none;
}
.primary-button:hover:not(:disabled) {
    background-color: var(--hex-accent-purple-500);
}
[data-theme="dark"] .primary-button:hover:not(:disabled) {
    background-color: var(--color-secondary);
}
/* Disabled State */
button:disabled, .button:disabled, .primary-button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
/* Theme Toggle Button */
#theme-toggle-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 4px;
    margin-left: auto;
}
.theme-icon {
    color: var(--color-text-secondary);
    transition: var(--transition-standard);
}
#theme-toggle-btn:hover .theme-icon {
    color: var(--color-primary);
}
/* ========================================= */
/* Sidebar Specific Controls                 */
/* ========================================= */
.dataset-selector {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
}
.dataset-selector label {
    font-size: 14px;
    font-weight: 500;
    color: var(--color-text-primary);
}
#status-banner {
    padding: 8px 12px;
    border-radius: var(--border-radius-md);
    font-size: 13px; /* Status Banner Text */
    color: var(--color-text-secondary);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    flex-grow: 1;
    margin-top: 10px;
}
#status-banner.error {
    background-color: rgba(var(--color-error-rgb), 0.1);
    color: var(--color-error);
    border-color: var(--color-error);
}
#status-banner.success {
    background-color: rgba(var(--color-success-rgb), 0.1);
    color: var(--color-success);
    border-color: var(--color-success);
}
#status-banner.info {
    background-color: rgba(var(--color-info-rgb), 0.1);
    color: var(--color-info);
    border-color: var(--color-info);
}
.filter-container {
    display: flex;
    flex-direction: column;
    gap: 16px;
}
.filter-row {
    display: flex;
    gap: 16px;
}
.filter-item {
    display: flex;
    flex-direction: column;
    gap: 6px;
    flex: 1;
}
.filter-item label {
    font-size: 13px; /* Filter Labels */
    font-weight: 500;
    color: var(--color-text-secondary);
}
/* ========================================= */
/* Table Styles                              */
/* ========================================= */
.table-container {
    overflow: hidden;
    margin-top: 16px;
}
.table-wrapper {
    overflow: auto;
    height: 100%;
    max-height: 450px;
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;
}
.table-wrapper::-webkit-scrollbar {
    height: 6px;
    width: 6px;
}
.table-wrapper::-webkit-scrollbar-track {
    background: transparent;
}
.table-wrapper::-webkit-scrollbar-thumb {
    background-color: var(--color-border);
    border-radius: 3px;
}
#expiring-contracts-table-container .table-wrapper {
     max-height: 300px; /* Keep expiring table shorter */
}
table {
    width: 100%;
    border-collapse: collapse;
}
th, td {
    padding: 10px 14px;
    text-align: left;
    border-bottom: 1px solid var(--color-border);
    white-space: nowrap;
}
th {
    font-weight: 600;
    font-size: 12px;
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    background-color: var(--color-surface-variant);
    position: sticky;
    top: 0;
    z-index: 1;
}
td {
    font-size: 12px;
    color: var(--color-text-primary);
}
td.number {
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-weight: 500;
}
/* Style utility classes */
td.font-medium { font-weight: 500; }
td.font-bold { font-weight: 700; }
td.text-xs { font-size: 11px; }
td.text-center { text-align: center; }
td.text-red-600 { color: var(--color-error); }
tr:hover td {
    background-color: var(--color-surface-container);
}
.summary-text {
    text-align: center;
    font-size: 12px; /* Table summary text */
    color: var(--color-text-secondary);
    margin-top: 12px;
    padding-top: 8px;
    border-top: 1px solid var(--color-border);
    flex-shrink: 0;
}
/* Allow specific columns to wrap */
#expiring-contracts-table-container td:nth-child(3),
#contract-leaders-table-container td:nth-child(6) {
    white-space: normal;
    word-wrap: break-word;
    max-width: 250px;
}
/* ========================================= */
/* Chart & Visualization Containers          */
/* ========================================= */
.chart-container {
     min-height: 200px;
}
/* Specific Chart/SVG elements */
#sankeyChart,
#choroplethMap svg,
#tavTcvChart {
    display: block;
    width: 100%;
    height: 100%;
    max-height: none;
}
/* TAV/TCV Chart Specifics */
.chart-y-labels-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
}
/* ========================================= */
/* Specific Component Styles                 */
/* ========================================= */
/* ARR Display */
.arr-display-grid {
    justify-content: center;
    align-items: center;
    padding: 20px 0;
    text-align: center;
}
.arr-grid-value {
    font-size: 2.4rem; /* ARR Value */
    font-weight: 700;
    color: var(--color-primary);
    margin-bottom: 10px;
}
.arr-description {
    font-size: 14px; /* ARR Description */
    color: var(--color-text-secondary);
}
/* Notes Section */
.notes-content {
    color: var(--color-text-secondary);
    font-size: 14px; /* Notes Text */
    overflow-y: auto;
}
.notes-content p { margin-bottom: 12px; }
.notes-content p:last-child { margin-bottom: 0; }
.notes-content ul { margin-left: 20px; margin-bottom: 12px; }
.notes-content ul li { margin-bottom: 6px; }
.notes-content strong { color: var(--color-text-primary); font-weight: 600; }
/* Sankey Chart Nodes/Links */
#sankeyChart path {
    stroke: var(--chart-color-secondary);
    stroke-opacity: 0.5;
    transition: stroke-opacity 0.3s ease;
    fill: none;
}
#sankeyChart path:hover { stroke-opacity: 0.8; }
#sankeyChart rect { fill: var(--chart-color-primary); }
#sankeyChart text {
    font-size: 12px; /* Sankey Labels */
    fill: var(--color-text-secondary);
    pointer-events: none;
}
/* Choropleth Map */
#choroplethMap path {
    transition: fill 0.3s ease, stroke-width 0.3s ease;
    stroke: var(--color-border);
    stroke-width: 0.5px;
}
#choroplethMap path:hover {
    stroke-width: 1.5px;
    stroke: var(--color-primary);
}
#choroplethMap text { /* Legend text */
    font-size: 12px; /* Map Legend */
    fill: var(--color-text-secondary);
    text-anchor: middle;
}
/* ========================================= */
/* Tooltip Styles                            */
/* ========================================= */
/* Base tooltip styles for all tooltip types */
.tooltip,
.sankey-tooltip,
.map-tooltip,
#tav-tcv-tooltip,
#sankey-tooltip-split {
    position: absolute;
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    padding: 10px 14px;
    border-radius: var(--border-radius-md);
    font-size: 12px;
    pointer-events: none;
    border: 1px solid var(--color-border);
    z-index: 9999;
    box-shadow: var(--shadow-md);
    /* Hidden by default */
    opacity: 0;
    visibility: hidden;
    display: none;
    /* Transitions */
    transition: opacity 0.3s ease, visibility 0s linear 0.3s, transform 0.3s ease;
    transform: translateY(5px);
}
/* Visible states for all tooltip types */
.tooltip.visible,
.sankey-tooltip.visible,
.map-tooltip.visible,
#tav-tcv-tooltip.visible,
.tooltip-visible,
.tooltip[style*="opacity: 1"],
.sankey-tooltip[style*="opacity: 1"],
.map-tooltip[style*="opacity: 1"],
#tav-tcv-tooltip[style*="opacity: 1"],
#sankey-tooltip-split[style*="display: block"] {
    opacity: 1;
    visibility: visible;
    display: block;
    transform: translateY(0);
    transition: opacity 0.3s ease, visibility 0s linear 0s, transform 0.3s ease;
}
/* Tooltip content styling */
.tooltip strong,
.sankey-tooltip strong,
.map-tooltip strong,
#tav-tcv-tooltip strong,
#sankey-tooltip-split strong {
    color: var(--color-text-primary);
    font-weight: 600;
    display: block;
    margin-bottom: 5px;
}
/* ========================================= */
/* Loading, Error, No Data States            */
/* ========================================= */
.loading-placeholder,
.error-placeholder,
.no-data-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 24px;
    text-align: center;
    color: var(--color-text-tertiary);
    font-size: 14px; /* Placeholder Text */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(var(--color-surface-rgb), 0.8);
    border-radius: var(--border-radius-lg);
    z-index: 10;
}
.error-placeholder { 
    color: var(--color-error); 
}
/* Loading Spinner */
.spinner {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 3px solid var(--color-surface-variant);
    border-top-color: var(--color-primary);
    animation: spin 1s linear infinite, pulse 1.5s ease-in-out infinite;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}
@keyframes pulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
}
/* Hide placeholders by default */
.loading-placeholder,
.error-placeholder,
.no-data-placeholder {
    display: none;
}
/* Display when needed */
.is-loading .loading-placeholder,
.has-error .error-placeholder,
.no-data .no-data-placeholder {
    display: flex;
}
/* ========================================= */
/* Utility Classes                           */
/* ========================================= */
.detail-link {
    color: var(--color-primary);
    text-decoration: none;
    font-weight: 500;
}
.detail-link:hover {
    color: var(--color-secondary);
    text-decoration: underline;
}
/* ========================================= */
/* Responsive Adjustments                    */
/* ========================================= */
/* Tablet (992px and below) */
@media (max-width: 992px) {
    /* App container adjustments */
    .app-container {
        margin: 20px;
        min-height: calc(100vh - 40px);
    }
    /* Side panel width */
    .side-panel { 
        width: 220px; 
    }
    /* Simplified 2-column layout */
    .bento-grid {
        grid-template-columns: repeat(2, 1fr);
        grid-template-areas:
            "sankey sankey"  /* Full width sankey */
            "arr map"        /* ARR and map side by side */
            "tavtcv tavtcv"  /* Full width charts */
            "leaders leaders"
            "expiring expiring";
        grid-auto-rows: minmax(250px, auto);
    }
    /* Typography adjustments */
    .card-header h2 { 
        font-size: 15px; 
    }
    .arr-grid-value { 
        font-size: 30px; 
    }
}
/* Mobile Landscape / Small Tablet (768px and below) */
@media (max-width: 768px) {
    /* App container adjustments */
    .app-container {
        margin: 15px;
        border-radius: 10px;
        min-height: calc(100vh - 30px);
    }
    /* Layout adjustments */
    .dashboard-layout {
        flex-direction: column;
        height: auto;
        overflow: auto;
    }
    .side-panel {
        width: 100%;
        height: auto;
        border-right: none;
        border-bottom: 1px solid var(--color-border);
        padding: 15px;
        overflow-y: visible;
    }
    .main-content {
        height: auto;
        overflow-y: visible;
        padding: 15px;
    }
    body {
        overflow: auto;
    }
    /* Optimized single-column layout with logical ordering */
    .bento-grid {
        grid-template-columns: 1fr;
        grid-template-areas:
            "arr"       /* Quick metrics first */
            "sankey"    /* Flow diagram */
            "map"       /* Geographic context */
            "tavtcv"    /* Detailed contract metrics */
            "leaders"   /* Important tables */
            "expiring";
        grid-auto-rows: minmax(275px, auto);
        gap: 15px;     /* Slightly tighter spacing */
    }
    /* Reset column spans for mobile */
    .col-span-2, .col-span-4, .col-span-5 { 
        grid-column: span 1; 
    }
    /* More compact header */
    .header-content {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
    }
    .header-controls {
        width: 100%;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 12px;
    }
    /* Table improvements for mobile */
    .table-wrapper { 
        overflow-x: auto; 
        -webkit-overflow-scrolling: touch; /* Smoother scrolling on iOS */
    }
    /* Remove fixed first column on mobile - this was causing problems */
    th:first-child,
    td:first-child {
        position: static;
        background-color: transparent;
        z-index: auto;
    }
    /* More compact tables */
    th, td {
        padding: 8px 12px;
    }
    /* Adjust chart containers for better proportions */
    #sankey-chart-container {
        height: 320px;
    }
    #map-container {
        height: 260px;
    }
    #tav-tcv-chart-container {
        height: 300px;
    }
    /* More compact components */
    .bento-box {
        padding: 15px;
    }
    .card-header {
        margin-bottom: 12px;
        padding-bottom: 8px;
    }
    /* Table height adjustments */
    #contract-leaders-table-container .table-wrapper {
        max-height: 350px;  
    }
    #expiring-contracts-table-container .table-wrapper {
        max-height: 250px;
    }
    /* Side panel and status banner */
    #status-banner {
        font-size: 12px;
        padding: 6px 10px;
    }
    /* Ensure footer extends full width */
    .side-panel > div[style*="font-size: 10px"] {
        width: 100%;
        display: block;
    }
    /* Loading states */
    .loading-placeholder, 
    .error-placeholder, 
    .no-data-placeholder {
        padding: 15px;
    }
    /* ARR display on mobile */
    #arr-loading, 
    #arr-error, 
    #arr-no-data {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    /* Ensure spinner is visible on mobile */
    .spinner {
        width: 20px;
        height: 20px;
        border-width: 2px;
    }
}
/* Small Mobile Devices (480px and below) */
@media (max-width: 480px) {
    /* App container */
    .app-container {
        margin: 10px;
        border-radius: 8px;
        min-height: calc(100vh - 20px);
    }
    /* Even more compact layout */
    .bento-grid {
        gap: 12px;
    }
    .bento-box {
        padding: 12px;
        border-radius: 8px; /* Slightly smaller radius */
    }
    /* Adjust typography */
    .title-area h1 { 
        font-size: 20px; 
    }
    .title-area p { 
        font-size: 13px; 
    }
    .card-header h2 { 
        font-size: 14px; 
    }
    .card-header {
        margin-bottom: 10px;
        padding-bottom: 6px;
    }
    /* Optimize small charts */
    #sankey-chart-container {
        height: 280px; /* Slightly shorter */
    }
    /* Ensure ARR value is readable */
    .arr-grid-value { 
        font-size: 26px; 
    }
    /* Further reduce table text */
    th, td {
        padding: 6px 10px;
    }
    .arr-description, .notes-content { 
        font-size: 13px; 
    }
    /* Chart text */
    #sankeyChart text, #choroplethMap text { 
        font-size: 11px; 
    }
    /* Footer & info text */
    .side-panel > div[style*="font-size: 10px"],
    .side-panel > div[style*="font-size: 12px"] {
        font-size: 11px !important;
    }
}
/* Remove conflicting dashboard grid styles */
.dashboard-grid,
.dashboard-card {
    display: none !important;
}
/* ========================================= */
/* Safe Area Support for Notched Devices     */
/* ========================================= */
@supports (padding: max(0px)) {
    .app-container {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
        padding-bottom: max(0px, env(safe-area-inset-bottom));
    }
}