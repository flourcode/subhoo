/* ========================================= */
/* Theme Variables (Grayscale App Theme)     */
/* ========================================= */
:root {
    /* --- Core Hex Palette (User Provided Grays) --- */
    --hex-darkest: #18191A;
    --hex-dark-gray: #242526;
    --hex-mid-dark-gray: #3A3B3C;
    --hex-light-gray: #B0B3B8;
    --hex-lightest-gray: #E4E6EB;
    --hex-white: #FFFFFF; /* Keep pure white for contrast */

    /* Status Colors (Standard Hex - Add color back here) */
    --status-red: #D81B60;    /* Using Pink/Red */
    --status-green: #388E3C;  /* Standard Green */
    --status-blue: #1E88E5;   /* Standard Blue */
    --status-yellow: #FBC02D; /* Warning */

    /* --- Semantic Color Mapping (Light Mode) --- */
    --color-background: var(--hex-lightest-gray);     /* Lightest gray BG */
    --color-surface: var(--hex-white);               /* White surfaces for cards */
    --color-surface-container: #F5F5F5;              /* Slightly off-white container */
    --color-surface-variant: #EEEEEE;                /* Subtle variant (e.g., table header) */

    --color-text-primary: var(--hex-darkest);          /* Darkest gray text */
    --color-text-secondary: var(--hex-mid-dark-gray);  /* Mid-dark gray text */
    --color-text-tertiary: var(--hex-light-gray);      /* Mid-light gray text */

    --color-primary: var(--hex-dark-gray);           /* Dark Gray for primary action */
    --color-on-primary: var(--hex-white);            /* White text on dark gray */
    --color-secondary: var(--hex-mid-dark-gray);     /* Mid-dark gray for secondary */
    --color-on-secondary: var(--hex-white);          /* White text on mid-dark gray */

    --color-border: #DCDCDC;                         /* Slightly darker than light surfaces */
    --color-outline: var(--hex-light-gray);          /* Mid-light gray for outlines */
    --color-focus-ring: rgba(58, 59, 60, 0.5);       /* Based on mid-dark gray */

    /* Chart Colors (Grayscale) */
    --chart-color-primary: var(--hex-dark-gray);
    --chart-color-secondary: var(--hex-mid-dark-gray);
    --chart-color-tertiary: var(--hex-light-gray);

    /* Status Colors */
    --color-error: var(--status-red);
    --color-success: var(--status-green);
    --color-warning: var(--status-yellow);
    --color-info: var(--status-blue);

    /* --- Layout & Feel Adjustments --- */
    --border-radius-sm: 6px;  /* Slightly tighter radius */
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    /* Softer Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 3px 6px rgba(0, 0, 0, 0.09);
    --shadow-lg: 0 6px 12px rgba(0, 0, 0, 0.1);
    --transition-standard: all 0.2s ease-in-out; /* Added ease */
    --bento-gap: 16px; /* Slightly tighter gap */
}

/* ========================================= */
/* CSS Variables - Dark Mode (Grayscale App Theme) */
/* ========================================= */
[data-theme="dark"] {
    /* --- Core Hex Palette References --- */
    /* Using names defined in :root */

    /* Status Colors (Brighter for Dark Mode) */
    --status-red-dark: #f06292;
    --status-green-dark: #81c784;
    --status-blue-dark: #64b5f6;
    --status-yellow-dark: #ffd54f;

    /* --- Semantic Color Mapping (Dark Mode) --- */
    --color-background: var(--hex-darkest);        /* #18191A */
    --color-surface: var(--hex-dark-gray);         /* #242526 */
    --color-surface-container: var(--hex-mid-dark-gray); /* #3A3B3C */
    --color-surface-variant: #4A4B4C;              /* Slightly lighter gray */

    --color-text-primary: var(--hex-lightest-gray);  /* #E4E6EB */
    --color-text-secondary: var(--hex-light-gray);   /* #B0B3B8 */
    --color-text-tertiary: #8A8D91;                 /* Slightly darker light gray */

    --color-primary: var(--hex-lightest-gray);     /* Lightest gray for primary action */
    --color-on-primary: var(--hex-darkest);        /* Darkest text on light gray */
    --color-secondary: var(--hex-light-gray);      /* Mid-light gray for secondary action */
    --color-on-secondary: var(--hex-darkest);      /* Darkest text on light gray */

    --color-border: var(--hex-mid-dark-gray);      /* Mid-dark gray for borders */
    --color-outline: #4A4B4C;                     /* Slightly lighter gray for outlines */
    --color-focus-ring: rgba(228, 230, 235, 0.6);  /* Based on light gray primary */

    /* Chart Colors (Grayscale) */
    --chart-color-primary: var(--hex-lightest-gray);
    --chart-color-secondary: var(--hex-light-gray);
    --chart-color-tertiary: #8A8D91;                /* Tertiary text color */

    /* Status Colors */
    --color-error: var(--status-red-dark);
    --color-success: var(--status-green-dark);
    --color-warning: var(--status-yellow-dark);
    --color-info: var(--status-blue-dark);

    /* Dark Mode Shadows */
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3); /* Slightly darker */
    --shadow-md: 0 3px 6px rgba(0, 0, 0, 0.35);
    --shadow-lg: 0 6px 12px rgba(0, 0, 0, 0.4);
    /* Inherits border-radius, transition, bento-gap from :root */
}

/* ========================================= */
/* Base Styles & Reset                       */
/* ========================================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    height: 100%;
    -webkit-font-smoothing: antialiased; /* App-like font smoothing */
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    background-color: var(--color-background);
    color: var(--color-text-primary);
    line-height: 1.5;
    font-size: 14px; /* Base size */
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden; /* Prevent body scroll */
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* ========================================= */
/* Base Links & Transitions                  */
/* ========================================= */
a {
    color: var(--color-primary); /* Will be dark/light gray based on mode */
    text-decoration: none;
    font-weight: 500; /* Make links slightly bolder */
    transition: color 0.2s ease;
}
a:hover {
    color: var(--color-secondary);
    text-decoration: underline; /* Add underline on hover for clarity */
}

/* Apply theme transitions */
.bento-box, .date-container, .side-panel, th, td, button, input, select,
.card-icon-circle, #status-banner {
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease;
}

/* ========================================= */
/* Layout Styles                             */
/* ========================================= */
.dashboard-layout {
    display: flex;
    height: 100vh;
    overflow: hidden;
}

.side-panel {
    width: 240px; /* Slightly narrower */
    height: 100vh;
    background-color: var(--color-surface); /* Use distinct surface color */
    border-right: 1px solid var(--color-border);
    padding: 16px; /* Slightly reduced padding */
    overflow-y: auto;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
}

/* --- Sidebar Info/Footer - Use Classes! --- */
/* Suggestion: Replace inline styles in HTML with these classes */
.sidebar-info {
    margin: 10px 0;
    font-size: 12px; /* Smaller info text */
    line-height: 1.4;
    color: var(--color-text-secondary);
    background-color: var(--color-surface-container); /* Use container bg */
    padding: 12px; /* Adjusted padding */
    border-radius: var(--border-radius-md);
    border: 1px solid var(--color-border);
}
.sidebar-footer {
     margin-top: auto; /* Push footer to bottom */
     padding-top: 12px; /* Consistent padding */
     border-top: 1px solid var(--color-border);
     font-size: 11px; /* Smaller footer text */
     color: var(--color-text-tertiary);
     text-align: center;
}
/* Fallback for existing inline styles (remove once HTML is updated) */
.side-panel > div[style*="font-size: 12px"] { font-size: 12px !important; }
.side-panel > div[style*="font-size: 10px"] { font-size: 11px !important; }
/* --- End Sidebar --- */


.main-content {
    flex: 1;
    height: 100vh;
    overflow-y: auto;
    padding: var(--bento-gap); /* Use gap variable for padding */
    background-color: var(--color-background); /* Use main background */
}

/* ========================================= */
/* Header Styles                             */
/* ========================================= */
.dashboard-header {
    margin-bottom: var(--bento-gap); /* Use gap variable */
    padding-bottom: var(--bento-gap); /* Add padding below header */
    border-bottom: 1px solid var(--color-border); /* Add divider */
}
.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px; /* Ensure gap */
}
.title-area h1 {
    font-size: 22px; /* Slightly smaller */
    font-weight: 600; /* Adjusted weight */
    color: var(--color-text-primary);
    margin: 0; /* Remove bottom margin */
}
.title-area p {
    font-size: 13px; /* Slightly smaller */
    color: var(--color-text-secondary);
    margin-top: 2px; /* Add small top margin */
}
.header-controls { display: flex; align-items: center; gap: 16px; }

.date-container {
    display: flex; align-items: center; gap: 8px; /* Tighter gap */
    padding: 6px 12px; /* Reduced padding */
    background-color: var(--color-surface-container);
    border-radius: var(--border-radius-md);
    box-shadow: none; /* Remove shadow for flatter look */
    border: 1px solid var(--color-border);
    font-size: 13px; /* Slightly smaller */
    color: var(--color-text-secondary); /* Muted text */
}
.date-separator { color: var(--color-text-tertiary); opacity: 0.7; }
#date-text, #time-text { font-weight: 500; color: var(--color-text-primary); }

/* ========================================= */
/* Bento Grid Layout (Reverted to Original 3-Row) */
/* ========================================= */
.bento-grid {
    display: grid;
    gap: var(--bento-gap);
    grid-template-columns: repeat(5, 1fr);
    /* --- Reverted to original layout --- */
    grid-template-areas:
        "sankey sankey sankey map arr"
        "tavtcv tavtcv leaders leaders leaders"
        "expiring expiring expiring expiring expiring";
    grid-template-rows: minmax(400px, auto) auto auto; /* Adjusted min height */
}
/* --- Corrected Area Assignments --- */
#bento-arr { grid-area: arr; }
#bento-sankey { grid-area: sankey; }
#bento-map { grid-area: map; }
#bento-tavtcv { grid-area: tavtcv; }
#bento-leaders { grid-area: leaders; }
#bento-expiring { grid-area: expiring; }
/* Column Span Utilities (Keep) */
.col-span-2 { grid-column: span 2; }
.col-span-4 { grid-column: span 4; }
.col-span-5 { grid-column: span 5; }

/* ========================================= */
/* Card Styles (`.bento-box`)                */
/* ========================================= */
.bento-box {
    background-color: var(--color-surface); /* Use surface color (White / Dark Gray) */
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md); /* Keep moderate shadow */
    padding: 16px; /* Slightly reduced padding */
    border: 1px solid var(--color-border);
    display: flex; flex-direction: column; height: 100%;
    position: relative; overflow: hidden;
    transition: var(--transition-standard); /* Ensure transition applies */
}
/* No dark theme override needed if light uses var(--color-surface) */

/* Remove specific #bento-arr override if present */
/* #bento-arr { background-color: ... ; } */
/* [data-theme="dark"] #bento-arr { background-color: ... ; } */

.bento-box:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px); /* Keep subtle hover */
    border-color: var(--color-outline); /* Add outline color on hover */
}

.card-header {
    display: flex; align-items: center; gap: 10px; /* Smaller gap */
    margin-bottom: 12px; /* Reduced margin */
    border-bottom: 1px solid var(--color-border);
    padding-bottom: 10px; /* Reduced padding */
    flex-shrink: 0;
}
.card-header h2 {
    font-size: 15px; /* Slightly smaller */
    font-weight: 600;
    color: var(--color-text-primary);
    flex-grow: 1; margin: 0;
}
.card-icon-circle {
    display: flex; align-items: center; justify-content: center;
    width: 28px; height: 28px; /* Smaller icon */
    border-radius: 50%;
    background-color: var(--color-surface-container);
    color: var(--color-primary); /* Use primary color */
    flex-shrink: 0;
}
.card-icon-circle svg { width: 16px; height: 16px; } /* Adjust icon size */

.card-content, .chart-container, .table-container, .arr-display-grid, .notes-content {
    flex-grow: 1; /* Ensure content fills space */
    display: flex; flex-direction: column;
    position: relative; min-height: 0; /* Prevent shrinking issues */
}

/* ========================================= */
/* Form Element Styles                       */
/* ========================================= */
.input-select, .input-date, input[type="search"], input[type="text"] {
    width: 100%;
    padding: 8px 12px; /* Slightly reduced padding */
    border: 1px solid var(--color-border); /* Use border, not outline initially */
    border-radius: var(--border-radius-md);
    font-size: 13px; /* Slightly smaller */
    color: var(--color-text-primary);
    background-color: var(--color-surface); /* Match surface */
    transition: var(--transition-standard);
}
.input-select:focus, .input-date:focus,
input[type="search"]:focus, input[type="text"]:focus {
    outline: 2px solid transparent; /* Remove default outline */
    outline-offset: 2px;
    border-color: var(--color-primary); /* Use primary color for border */
    box-shadow: 0 0 0 2px var(--color-focus-ring); /* Use focus ring variable */
    background-color: var(--color-surface); /* Keep background */
}
.input-select option { /* May need adjustments based on browser */
    background-color: var(--color-background); /* Use main BG */
    color: var(--color-text-primary);
}
::placeholder { color: var(--color-text-tertiary); opacity: 0.8; }

/* ========================================= */
/* Button Styles                             */
/* ========================================= */
button, .button, .primary-button {
    display: inline-flex; align-items: center; justify-content: center; gap: 6px;
    padding: 8px 14px; /* Adjusted padding */
    border-radius: var(--border-radius-md);
    font-size: 13px; /* Slightly smaller */
    font-weight: 500; cursor: pointer;
    transition: var(--transition-standard);
    border: 1px solid var(--color-border); /* Use standard border */
    text-align: center; vertical-align: middle; white-space: nowrap;
}
button svg, .button svg, .primary-button svg { width: 14px; height: 14px; } /* Consistent icon size */

/* Standard Button */
button, .button {
    background-color: var(--color-surface);
    color: var(--color-text-primary);
    border-color: var(--color-outline); /* Use outline color for border */
}
button:hover:not(:disabled), .button:hover:not(:disabled) {
    background-color: var(--color-surface-container);
    border-color: var(--color-primary); /* Primary border on hover */
    transform: var(--scale-interactive); /* Add subtle scale from vars */
}

/* Primary Button */
.primary-button {
    background-color: var(--color-primary);
    color: var(--color-on-primary);
    border-color: var(--color-primary); /* Match background */
}
.primary-button:hover:not(:disabled) {
    /* Mix primary with background to desaturate/darken slightly on hover */
    background-color: color-mix(in srgb, var(--color-primary) 85%, var(--color-background));
    border-color: color-mix(in srgb, var(--color-primary) 85%, var(--color-background));
    transform: var(--scale-interactive);
}
/* Ensure dark mode primary button hover is also handled (it uses --color-secondary currently) */
[data-theme="dark"] .primary-button:hover:not(:disabled) {
     background-color: color-mix(in srgb, var(--color-primary) 85%, var(--color-background));
     border-color: color-mix(in srgb, var(--color-primary) 85%, var(--color-background));
}


/* Disabled State */
button:disabled, .button:disabled, .primary-button:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* Theme Toggle Button */
#theme-toggle-btn { background: none; border: none; cursor: pointer; padding: 4px; margin-left: auto; }
.theme-icon { color: var(--color-text-secondary); transition: var(--transition-standard); }
#theme-toggle-btn:hover .theme-icon { color: var(--color-primary); }

/* ========================================= */
/* Sidebar Specific Controls                 */
/* ========================================= */
/* Style the container holding the controls */
.side-panel > div:has(#dataset-select) { /* Assuming controls are in a div */
    display: flex; flex-direction: column; gap: 10px; /* Adjusted gap */
}
.side-panel h2 { /* Sidebar Subheadings */
    font-size: 12px;
    font-weight: 600;
    color: var(--color-text-secondary);
    margin: 8px 0 0 0; /* Adjusted margin */
    text-transform: uppercase;
    letter-spacing: 0.05em;
}
#status-banner {
    padding: 8px 10px; border-radius: var(--border-radius-sm); font-size: 12px;
    color: var(--color-text-secondary); background-color: var(--color-surface-container);
    border: 1px solid var(--color-border); text-align: center; margin-top: 8px;
}
/* Status banner colors using relative color syntax (modern browsers) */
/* Add !important if needed, but try without first */
#status-banner.error { background-color: oklch(from var(--color-error) l c h / 10%); color: var(--color-error); border-color: var(--color-error); }
#status-banner.success { background-color: oklch(from var(--color-success) l c h / 10%); color: var(--color-success); border-color: var(--color-success); }
#status-banner.info { background-color: oklch(from var(--color-info) l c h / 15%); color: var(--color-info); border-color: var(--color-info); }
/* Fallback using semi-transparent rgba if needed */
/* #status-banner.error { background-color: rgba(var(--status-red-rgb), 0.1); ... } */


/* ========================================= */
/* Table Styles                              */
/* ========================================= */
.table-container { overflow: hidden; margin-top: 16px; flex-grow: 1;} /* Allow table container to grow */
.table-wrapper { overflow: auto; max-height: 100%; } /* Let wrapper scroll within container */
/* Adjust max-height constraints if needed */
/* #contract-leaders-table-container .table-wrapper { max-height: 450px; } */
/* #expiring-contracts-table-container .table-wrapper { max-height: 300px; } */

table { width: 100%; border-collapse: collapse; }
th, td {
    padding: 8px 12px; /* Slightly reduced padding */
    text-align: left; border-bottom: 1px solid var(--color-border);
    white-space: nowrap; font-size: 12px; /* Consistent smaller size */
}
th {
    font-weight: 600; color: var(--color-text-secondary);
    text-transform: uppercase; letter-spacing: 0.05em;
    background-color: var(--color-surface-variant);
    position: sticky; top: 0; z-index: 1;
}
td { color: var(--color-text-primary); }
td.number { text-align: right; font-variant-numeric: tabular-nums; }
td.font-medium { font-weight: 500; }
td.font-bold { font-weight: 700; }
td.text-center { text-align: center; }
td.text-red-600 { color: var(--color-error); } /* Use status color */

tr:hover td { background-color: var(--color-surface-container); }
.summary-text { /* Keep styles */ }
/* Wrapping columns (Keep) */
#expiring-contracts-table-container td:nth-child(3),
#contract-leaders-table-container td:nth-child(6) { /* Update if columns change */
    white-space: normal; word-wrap: break-word; max-width: 200px; /* Adjusted max-width */
}
/* Sticky Column styles (Keep) */
@media (max-width: 768px) {
    .table-wrapper { overflow-x: auto; }
    th:first-child, td:first-child { position: sticky; left: 0; z-index: 2; }
    th:first-child { background-color: var(--color-surface-variant); }
    td:first-child { background-color: var(--color-surface); }
    tr:hover td:first-child { background-color: var(--color-surface-container); }
}

/* ========================================= */
/* Chart & Visualization Containers          */
/* ========================================= */
.chart-container { min-height: 200px; flex-grow: 1; position: relative; } /* Added position relative */
#sankeyChart, #choroplethMap svg, #tavTcvChart { display: block; width: 100%; height: 100%; max-height: none; }

/* Remove TAV/TCV specific label container - assuming JS uses native labels now */
/* .chart-y-labels-container { ... } */

/* ========================================= */
/* Specific Component Styles                 */
/* ========================================= */
/* ARR Display */
.arr-display-grid { /* Keep styles, maybe adjust font size */ }
.arr-grid-value { font-size: 2.2rem; /* Slightly smaller */ color: var(--color-primary); margin-bottom: 8px; font-weight: 600;}
.arr-description { font-size: 13px; color: var(--color-text-secondary); }

/* Notes Section (Keep styles) */

/* --- Chart Element Styling (Moved from JS if possible) --- */
/* Sankey */
#sankeyChart path { stroke: var(--color-border); stroke-opacity: 0.4; transition: stroke-opacity 0.2s ease; fill: none; }
#sankeyChart path:hover { stroke-opacity: 0.7; }
#sankeyChart rect { stroke: var(--color-surface); stroke-width: 0.5px; }
#sankeyChart rect[data-type="agency"] { fill: var(--chart-color-tertiary); }
#sankeyChart rect[data-type="prime"] { fill: var(--chart-color-primary); }
#sankeyChart rect[data-type="sub"] { fill: var(--chart-color-secondary); }
#sankeyChart text { font-size: 10px; fill: var(--color-text-secondary); pointer-events: none; }

/* Map */
#choroplethMap path { stroke: var(--color-background); stroke-width: 0.5px; fill: var(--color-surface-variant); transition: fill 0.2s ease, stroke 0.2s ease, stroke-width 0.2s ease; }
#choroplethMap path:hover { stroke: var(--color-primary); stroke-width: 1.5px; }
#choroplethMap text, #choroplethMap .legend-text { font-size: 10px; fill: var(--color-text-secondary); text-anchor: middle; }
#choroplethMap .legend-rect { stroke: var(--color-border); stroke-width: 0.5px; }


/* ========================================= */
/* Tooltip Styles                            */
/* ========================================= */
/* Base tooltip (Keep styles, ensure vars are used) */
.tooltip, .sankey-tooltip, .map-tooltip, #tav-tcv-tooltip {
    position: absolute !important;
    background-color: var(--color-surface) !important;
    color: var(--color-text-primary) !important;
    padding: 8px 12px !important; /* Slightly smaller padding */
    border-radius: var(--border-radius-sm) !important; /* Smaller radius */
    font-size: 12px !important;
    line-height: 1.4 !important;
    pointer-events: none !important;
    border: 1px solid var(--color-border) !important;
    z-index: 9999 !important;
    box-shadow: var(--shadow-lg) !important; /* Slightly larger shadow for pop */
    max-width: 250px; /* Limit width */
    /* Transition */
    opacity: 0; transform: translateY(5px);
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0.2s;
    visibility: hidden; display: none; /* Start hidden */
}
/* Visible state */
.tooltip.visible, .sankey-tooltip.visible, .map-tooltip.visible, #tav-tcv-tooltip.visible,
/* Fallbacks for JS setting style directly */
.tooltip[style*="opacity: 1"], .sankey-tooltip[style*="opacity: 1"],
.map-tooltip[style*="opacity: 1"], #tav-tcv-tooltip[style*="opacity: 1"],
.tooltip[style*="display: block"], .sankey-tooltip[style*="display: block"],
.map-tooltip[style*="display: block"], #tav-tcv-tooltip[style*="display: block"] {
    opacity: 1 !important;
    visibility: visible !important;
    display: block !important;
    transform: translateY(0) !important;
    transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s linear 0s !important;
}
/* Tooltip content */
.tooltip strong, .sankey-tooltip strong, .map-tooltip strong, #tav-tcv-tooltip strong {
    color: var(--color-text-primary); font-weight: 600; display: block; margin-bottom: 4px;
}


/* ========================================= */
/* Loading, Error, No Data States            */
/* ========================================= */
.loading-placeholder, .error-placeholder, .no-data-placeholder {
    /* Keep structure - adjust colors */
    display: none; /* Hide by default */
    flex-direction: column; align-items: center; justify-content: center;
    gap: 10px; padding: 20px; text-align: center;
    color: var(--color-text-tertiary); font-size: 13px; /* Smaller text */
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    /* Use surface color with slight opacity for overlay */
    background-color: color-mix(in srgb, var(--color-surface) 90%, transparent);
    border-radius: var(--border-radius-lg); /* Match card */
    z-index: 10;
}
/* Remove RGB vars, rely on color-mix or rgba directly if needed */
/* :root { --color-surface-rgb: ... } */
/* [data-theme="dark"] { --color-surface-rgb: ... } */

.error-placeholder { color: var(--color-error); }
.spinner { /* Keep styles */ }
@keyframes spin { to { transform: rotate(360deg); } }
/* Pulse animation */
.spinner { animation: spin 1s linear infinite, pulse 1.5s ease-in-out infinite alternate; }
@keyframes pulse { 0% { opacity: 0.6; } 100% { opacity: 1; } }

/* Display logic */
.is-loading .loading-placeholder, .has-error .error-placeholder, .no-data .no-data-placeholder {
    display: flex;
}


/* ========================================= */
/* Utility Classes                           */
/* ========================================= */
.detail-link { /* Keep styles */ }


/* ========================================= */
/* Responsive Adjustments                    */
/* ========================================= */
/* Keep existing responsive styles, verify they work with new theme */
@media (max-width: 1200px) {}
@media (max-width: 992px) { /* Tablet */
    .side-panel { width: 220px; }
     .bento-grid {
         grid-template-columns: repeat(3, 1fr); /* Adjusted columns */
         grid-template-areas: /* Simpler mobile grid */
            "sankey sankey map"
            "sankey sankey arr"
            "tavtcv leaders leaders"
            "expiring expiring expiring";
         grid-auto-rows: minmax(300px, auto);
     }
     /* Update spans if needed */
    .col-span-2 { grid-column: span 2; }
    .col-span-3 { grid-column: span 3; } /* Add if needed */
    .col-span-4, .col-span-5 { grid-column: span 3; } /* Adjust larger spans */

     .arr-grid-value { font-size: 2rem; }
     .card-header h2 { font-size: 14px; }
}

@media (max-width: 768px) { /* Mobile Landscape / Small Tablet */
    /* Keep layout changes */
    .main-content { padding: 16px; }
    .bento-grid {
        grid-template-columns: 1fr; /* Single column */
        grid-template-areas: /* Explicitly define single column areas */
            "arr"
            "sankey"
            "map"
            "tavtcv"
            "leaders"
            "expiring";
         grid-auto-rows: minmax(250px, auto);
    }
    /* Reset column spans */
    .col-span-2, .col-span-3, .col-span-4, .col-span-5 { grid-column: span 1; }
    .header-content { /* Stack header */ }
    /* Keep sticky table styles */
    /* Adjust chart heights */
    #sankey-chart-container, #map-container { min-height: 280px; height: 320px; }
    #expiring-contracts-table-container .table-wrapper { max-height: 250px; }
}

@media (max-width: 480px) { /* Small Mobile */
    /* Keep font size adjustments */
     .arr-grid-value { font-size: 1.8rem; }
     .side-panel, .main-content { padding: 12px; }
     .bento-gap { --bento-gap: 12px; } /* Reduce gap */
     /* Adjust sidebar text sizes if needed */
}


/* ========================================= */
/* Remove Conflicting Rules                  */
/* ========================================= */
/* Delete the following rules if they exist: */
/* .app-container { ... } */
/* [data-theme="dark"] .app-container { ... } */
/* .dashboard-grid { ... } */
/* .dashboard-card { ... } */
/* [data-theme="dark"] .dashboard-card { ... } */
/* @media (max-width: 600px) .dashboard-grid { ... } */
/* @media (max-width: 600px) .dashboard-card { ... } */


/* ========================================= */
/* Keep Enhancements (If separate)           */
/* ========================================= */
/* Enhanced hover states for table rows (adjust color mix if needed) */
.table-wrapper tr:hover td { /* Combined with main rule */
     background-color: color-mix(in srgb, var(--color-primary) 8%, var(--color-surface)); /* Subtle primary mix */
}
/* Tooltip animations (Keep base styles) */
/* Spinner pulse animation (Keep base styles) */